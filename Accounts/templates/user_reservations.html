{% extends "base.html" %} {% block content %} {% include "navbar_2.html" %}

{% load static %}

<section class="container page-space mt-5 pb-5">
  <table class="table table_id text-center">
    <thead>
      {% if booking %}
      <tr>
        <th scope="col">Status</th>
        <th scope="col">Reference Number</th>
        <th scope="col">Date Of Visit</th>
        <th scope="col">Time Of Visit</th>
        <th scope="col">Details</th>
      </tr>
      {% else %}
      <div class="row d-flex align-items-center justify-content-between p-5">
        <div class="col-lg-6 col-12 text-center text-lg-start mt-5">
          <p>It appears you don't have any bookings with us as of yet.</p>
          <p>We would be absolutely delighted to have you come down to visit us!</p>
          <p>Please click the button below and complete the booking form and we will look forward to seeing you.</p>
          <form action="{% url 'book_now'%}">
            <button class="black-button mt-4" type="submit">Book Now</button>
          </form>
        </div>
        <div class="col-lg-6 col-12 text-center text-lg-end">
          <img class="img-fluid" src="{% static 'images/sad-duck-image.png'%}" alt="Sad duck image" />
        </div>
      </div>
      {% endif %}
    </thead>
    <tbody>
      {% for booking in booking %}
      <tr>
        <td data-label="Booking Status">{% if booking.guest_attended == True %} <span class="green-text">Booking Attended</span> <i class="fas fa-check green-text"></i> {% elif booking.booking_denied %} <span class="red-text">Booking Denied</span> <i class="fas fa-exclamation red-text"></i> {% elif booking.booking_approved == True %} <span class="green-text">Booking Approved</span> <i class="fas fa-check green-text"></i> {% else %} <span class="text-warning">Awaiting Approval</span> <i class="fas fa-exclamation text-warning"></i> {% endif %}</td>
        <td data-label="Ref">{{ booking.ref_number }}</td>
        <td data-label="Date">{{ booking.date_of_visit }}</td>
        <td data-label="Time">{{ booking.time_of_visit }}</td>
        <form action="user-details-booking/{{ booking.id }}" method="POST">
          <input type="hidden" name="next" value="{{request.path}}">
          <td data-label="details"><button type="submit" class="btn btn-primary">Details</button></td>
          {% csrf_token %}
        </form>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>


{% include "footer.html" %} {% endblock %}
